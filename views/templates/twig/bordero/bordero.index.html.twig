{% extends "@PrestaShop/Admin/layout.html.twig" %}


{% block stylesheets %}
	{{ parent() }}
	<link href="{{ asset('../modules/mpbrtapishipment/views/assets/components/datatables/datatables.min.css') }}" rel="stylesheet">
	<link href="{{ asset('../modules/mpbrtapishipment/views/assets/components/swal/sweetalert2.min.css') }}" rel="stylesheet">
	<link href="{{ asset('../modules/mpbrtapishipment/views/assets/components/select2/select2.min.css') }}" rel="stylesheet">
{% endblock %}

{% block content %}
	<section class="toolbar" id="toolbar-menu">
		{% include '@Modules/mpbrtapishipment/views/templates/twig/components/toolbar.html.twig' with { icon: 'local_shipping', title: 'Border√≤', showToolbar: true, showSearch: false, menu: menu } %}
	</section>

	<section class="datatable-container mt-4" id="datatable-container">
		{% include '@Modules/mpbrtapishipment/views/templates/twig/components/datatable.html.twig' with { borderoRows: borderoRows } %}
	</section>
{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script type="text/javascript">
		// Url Controller
		const datatablesLangUrl = "{{ asset('../modules/mpbrtapishipment/views/assets/components/datatables/it-IT.json') }}";
		const borderoUrl = '{{ path("mpbrtapishipment_admin_brt_bordero_get_table_data") }}';
		const borderoHistoryUrl = '{{ path("mpbrtapishipment_admin_brt_bordero_get_history_table_data") }}';
		const borderoPrintLabelsUrl = '{{ path("mpbrtapishipment_admin_brt_bordero_print_labels") }}';
		const borderoPrintAllLabelsUrl = '{{ path("mpbrtapishipment_admin_brt_bordero_print_all_labels") }}';
		const borderoNewLabelUrl = '{{ path("mpbrtapishipment_admin_brt_bordero_new_label") }}';
		const borderoDeleteLabelUrl = '{{ path("mpbrtapishipment_admin_brt_bordero_delete_label") }}';
		const borderoFillOrderDetailsUrl = '{{ path("mpbrtapishipment_admin_brt_bordero_fill_order_details") }}';
		const borderoPreferencesUrl = '{{ path("mpbrtapishipment_admin_brt_bordero_preferences") }}';
		const borderoPermissionsUrl = '{{ path("mpbrtapishipment_admin_brt_bordero_permissions") }}';
		const borderoSaveSettingsUrl = '{{ path("mpbrtapishipment_admin_brt_bordero_save_settings") }}';
		const borderoSaveBrtRequestUrl = '{{ path("mpbrtapishipment_admin_brt_bordero_save_brt_request") }}';
		const borderoCreateBrtRequestUrl = '{{ path("mpbrtapishipment_admin_brt_bordero_create_brt_request") }}';
		const borderoSaveBrtResponseUrl = '{{ path("mpbrtapishipment_admin_brt_bordero_save_brt_response") }}';
		const borderoReadParcelsUrl = '{{ path("mpbrtapishipment_admin_brt_bordero_read_parcels") }}';
		const borderoPrintBorderoUrl = '{{ path("mpbrtapishipment_admin_brt_bordero_print_bordero") }}';
		const borderoUpdatePrintedStatusUrl = '{{ path("mpbrtapishipment_admin_brt_bordero_update_printed") }}';
		const borderoUrls = {
			borderoSaveBrtRequestUrl: borderoSaveBrtRequestUrl,
			borderoCreateBrtRequestUrl: borderoCreateBrtRequestUrl,
			borderoSaveBrtResponseUrl: borderoSaveBrtResponseUrl,
			borderoReadParcelsUrl: borderoReadParcelsUrl,
			borderoNewLabelUrl: borderoNewLabelUrl,
			borderoFillOrderDetailsUrl: borderoFillOrderDetailsUrl,
			borderoUpdatePrintedStatusUrl: borderoUpdatePrintedStatusUrl
		};
		// Costanti preferenze etichetta
		const labelPreferences = {
			{% for key, value in labelPreferences %}
			{{ key }}: "{{ value }}",
			{% endfor %}
		};
		// Costanti permessi etichetta
		const labelPermissions = {
			create: "{{ labelPermissions.create }}",
			read: "{{ labelPermissions.read }}",
			update: "{{ labelPermissions.update }}",
			delete: "{{ labelPermissions.delete }}"
		};
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js" integrity="sha384-VFQrHzqBh5qiJIU0uGU5CIW3+OWpdGGJM9LBnGbuIH2mkICcFZ7lPd/AAtI7SNf7" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js" integrity="sha384-/RlQG9uf0M2vcTw3CX7fbqgbj/h8wKxw7C3zu9/GxcBPRKOEcESxaxufwRXqzq6n" crossorigin="anonymous"></script>
	<script src="{{ asset('../modules/mpbrtapishipment/views/assets/components/datatables/datatables.min.js') }}"></script>
	<script src="{{ asset('../modules/mpbrtapishipment/views/assets/components/swal/sweetalert2.all.min.js') }}"></script>
	<script src="{{ asset('../modules/mpbrtapishipment/views/assets/components/swal/swalConfirm.js') }}"></script>
	<script src="{{ asset('../modules/mpbrtapishipment/views/assets/components/select2/select2.min.js') }}"></script>
	<script src="{{ asset('../modules/mpbrtapishipment/views/assets/js/controllers/bordero.js') }}"></script>
	<script src="{{ asset('../modules/mpbrtapishipment/views/assets/js/label/LabelManager.js') }}"></script>
{% endblock %}
